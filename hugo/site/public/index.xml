<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>留白</title>
    <link>/public/</link>
    <description>Recent content on 留白</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 06 May 2022 10:26:00 +0800</lastBuildDate><atom:link href="/public/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Ingress-nginx中如何配置自定义响应头</title>
      <link>/public/k8s/ingress-nginx%E4%B8%AD%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E5%93%8D%E5%BA%94%E5%A4%B4/</link>
      <pubDate>Fri, 06 May 2022 10:26:00 +0800</pubDate>
      
      <guid>/public/k8s/ingress-nginx%E4%B8%AD%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E5%93%8D%E5%BA%94%E5%A4%B4/</guid>
      <description>官方文档：https://kubernetes.github.io/ingress-nginx/
方式一 通过Ingress注释配置，add_header指令会映射到nginx配置文件中的localtion模块中，只对单个服务生效
https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/#configuration-snippet
示例：
apiVersion: extensions/v1betal kind: Ingress metadata:  annotations:  kubernetes.io/ingress.class: nginx  nginx.ingress.kubernetes.io/configuration-snippet: | add_header &amp;#34;**&amp;#34; &amp;#34;**&amp;#34;; spec:  rules:  ** 方式二 将配置存储在configmap中，在Ingress中间接引用，此方式会将add_header指令映射到nginx配置文件中的http模块中，对所有服务生效
https://kubernetes.github.io/ingress-nginx/examples/customization/custom-headers/
示例：
自定义custom-headers文件，存储响应头
apiVersion: v1 kind: ConfigMap metadata:  name: custom-headers  namespace: ingress-nginx data:  X-Different-Name: &amp;#34;true&amp;#34;  X-Using-Nginx-Controller: &amp;#34;true&amp;#34; 在Ingress-nginx默认配置文件中，间接引用custom-headers
apiVersion: v1 kind: ConfigMap metadata:  name: ingress-nginx-controller  namespace: ingress-nginx data:  add-headers: &amp;#34;ingress-nginx/custom-headers&amp;#34; 注意事项  方式二修改配置文件后，需要重启nginx-ingress-controller，配置才能生效！ 由于nginx指令add_header的继承性问题，两种方式不能同时配置，否则方式二会失效！请参考：https://juejin.cn/post/6844904041126838286  </description>
    </item>
    
    <item>
      <title>解决Ingress-nginx路由配置问题</title>
      <link>/public/k8s/%E8%A7%A3%E5%86%B3ingress-nginx%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/</link>
      <pubDate>Fri, 06 May 2022 09:33:00 +0800</pubDate>
      
      <guid>/public/k8s/%E8%A7%A3%E5%86%B3ingress-nginx%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98/</guid>
      <description>Ingress-nginx路由配置 官方文档：https://kubernetes.github.io/ingress-nginx/examples/rewrite/
静态文件404问题 https://www.qikqiak.com/post/url-rewrite-on-ingress-nginx/
https://stackoverflow.com/questions/50871970/kubernetes-ingress-nginx-loading-resources-404
配置示例 kind: Ingress apiVersion: extensions/v1beta1 metadata:  name: **  namespace: **  annotations:  kubernetes.io/ingress.class: nginx  nginx.ingress.kubernetes.io/rewrite-target: /$1	# $1为正则匹配占位符  nginx.ingress.kubernetes.io/configuration-snippet: | rewrite ^/css/(.*)$ /app/css/$1 redirect; # 给静态文件目录添加app前缀 spec:  rules:  - host: **  http:  paths:  - path: /app/(.*)	# 添加app路径，以路径区别后端服务  pathType: Prefix  backend:  serviceName: **  servicePort: 80 注意事项 后端对静态资源的引用，要删除前导斜杠
如: &amp;lt;script src=/public/js/example.js&amp;gt;&amp;lt;/script&amp;gt; 删除前导斜杠: &amp;lt;script src=js/example.</description>
    </item>
    
  </channel>
</rss>
